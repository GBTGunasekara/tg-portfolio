---
import Layout from "../layouts/Layout.astro";

import { profile } from "../data/profile";
import { skillGroups } from "../data/skills";
import { experience } from "../data/experience";
import { education } from "../data/education";

const emailText = (profile.links.email || "").replace(/^mailto:/, "");

// Highlight cards (AI themed)
const highlights = [
  {
    title: "ERP R&D",
    desc: "Enterprise delivery across product + framework teams.",
    icon: "stack",
  },
  {
    title: "AI Tooling",
    desc: "Internal tools that accelerate ML/LLM adoption and quality.",
    icon: "cpu",
  },
  {
    title: "DevOps mindset",
    desc: "CI/CD, cloud deployments, observability, reliability.",
    icon: "cloud",
  },
];

// Tag colors (RGB triplets)
const GROUP_COLOR = {
  "Programming": "56 189 248",
  "Frameworks": "167 139 250",
  "Cloud & DevOps": "34 211 238",
  "AI & ML": "244 114 182",
  "Data & Databases": "251 191 36",
  "Tools": "151 120 86",
};

const TAG_COLOR = (tag = "") => {
  const t = tag.toLowerCase();
  if (t.includes("mldp") || t.includes("llm") || t.includes("ml")) return "244 114 182";
  if (t.includes("azure") || t.includes("cloud")) return "34 211 238";
  if (t.includes("ci") || t.includes("cd") || t.includes("pipelines")) return "34 211 238";
  if (t.includes("framework") || t.includes("aurena")) return "167 139 250";
  if (t.includes("kubernetes") || t.includes("docker")) return "34 211 238";
  return "56 189 248";
};

const iconSvg = {
  // Section / UI icons (minimal, futuristic line icons)
  spark: `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2l1.6 6.2L20 10l-6.4 1.8L12 18l-1.6-6.2L4 10l6.4-1.8L12 2z"/></svg>`,
  stack: `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2l9 5-9 5-9-5 9-5z"/><path d="M3 12l9 5 9-5"/><path d="M3 17l9 5 9-5"/></svg>`,
  cpu: `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="7" y="7" width="10" height="10" rx="2"/><path d="M4 10h3"/><path d="M4 14h3"/><path d="M17 10h3"/><path d="M17 14h3"/><path d="M10 4v3"/><path d="M14 4v3"/><path d="M10 17v3"/><path d="M14 17v3"/></svg>`,
  cloud: `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 17.5a4.5 4.5 0 0 0-1-8.9A6 6 0 0 0 6.2 9.7 4 4 0 0 0 6 17.5h14z"/></svg>`,
  pin: `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s7-4.5 7-11a7 7 0 1 0-14 0c0 6.5 7 11 7 11z"/><circle cx="12" cy="11" r="2"/></svg>`,
  mail: `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16v16H4z"/><path d="m4 6 8 7 8-7"/></svg>`,
  link: `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 1 0-7l1-1a5 5 0 0 1 7 7l-1 1"/><path d="M14 11a5 5 0 0 1 0 7l-1 1a5 5 0 0 1-7-7l1-1"/></svg>`,
  arrow: `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 17L17 7"/><path d="M7 7h10v10"/></svg>`,
};

const expTags = (team = "") => {
  const t = team.toLowerCase();
  if (t.includes("ai")) return ["AI/ML/LLM", "Azure", "Framework", "Automation"];
  if (t.includes("framework")) return ["CI/CD", "Platform", "Asset", "IFS Cloud", ];
  if (t.includes("asset")) return ["IFS Cloud", "Aurena", "UX", "Quality"];
  return ["Engineering", "Delivery"];
};
---

<Layout title={`${profile.name} | Portfolio`}>
  <main class="relative mx-auto max-w-6xl px-4 py-10">
    <!-- AI background -->

    <!-- HERO -->
    <section class="relative mt-2" data-reveal>
      <div class="hero-glow pointer-events-none absolute -top-16 left-1/2 h-72 w-72 -translate-x-1/2 rounded-full blur-3xl"></div>

      <div class="grid gap-10 md:grid-cols-[1.2fr_0.8fr] md:items-center">
        <div class="space-y-6">
          <div class="flex flex-wrap items-center gap-2">
            <span class="pill">
              {profile.title}
            </span>

            {profile.location && (
              <span class="pill pill-ghost">
                <span class="mr-2 inline-flex align-middle" set:html={iconSvg.pin} />
                {profile.location}
              </span>
            )}
          </div>

          <h1 class="hero-title text-4xl font-bold tracking-tight md:text-6xl">
            {profile.tagline}
          </h1>

          <p class="max-w-2xl text-sm leading-6 opacity-85 md:text-base">
            {profile.summary}
          </p>

          <div class="flex flex-wrap gap-3 pt-1">
            <a href="#contact" class="btn">
              <span class="icon" set:html={iconSvg.mail} />
              Contact
            </a>

            <a href={profile.links.linkedin} target="_blank" rel="noreferrer" class="btn">
              <!-- LinkedIn icon (solid) -->
              <svg aria-hidden="true" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M4.98 3.5C4.98 4.88 3.87 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1 4.98 2.12 4.98 3.5zM.22 8.09H4.8V24H.22V8.09zM8.09 8.09h4.4v2.17h.06c.61-1.16 2.1-2.38 4.33-2.38 4.63 0 5.49 3.05 5.49 7.02V24h-4.58v-7.67c0-1.83-.03-4.18-2.55-4.18-2.55 0-2.94 1.99-2.94 4.05V24H8.09V8.09z"/>
              </svg>
              LinkedIn
              <span class="icon opacity-80" set:html={iconSvg.arrow} />
            </a>

            <a href={profile.links.github} target="_blank" rel="noreferrer" class="btn">
              <svg aria-hidden="true" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 .5C5.73.5.75 5.6.75 12c0 5.1 3.29 9.43 7.86 10.96.58.11.79-.26.79-.57v-2.05c-3.2.71-3.87-1.58-3.87-1.58-.52-1.36-1.27-1.72-1.27-1.72-1.04-.72.08-.71.08-.71 1.15.08 1.76 1.22 1.76 1.22 1.02 1.79 2.67 1.27 3.32.97.1-.76.4-1.27.72-1.56-2.55-.3-5.23-1.31-5.23-5.83 0-1.29.44-2.35 1.17-3.18-.12-.3-.51-1.52.11-3.16 0 0 .96-.32 3.14 1.22.91-.26 1.88-.38 2.85-.38.97 0 1.95.13 2.85.38 2.18-1.54 3.14-1.22 3.14-1.22.62 1.64.23 2.86.11 3.16.73.83 1.17 1.89 1.17 3.18 0 4.53-2.69 5.52-5.25 5.82.41.37.78 1.1.78 2.22v3.3c0 .31.21.69.8.57 4.56-1.53 7.85-5.86 7.85-10.96C23.25 5.6 18.27.5 12 .5z"/>
              </svg>
              GitHub
              <span class="icon opacity-80" set:html={iconSvg.arrow} />
            </a>
          </div>
        </div>

        <!-- Profile image -->
        <div class="relative mx-auto" data-reveal>
          <div class="avatar-glow pointer-events-none absolute -inset-10 rounded-full blur-3xl"></div>
		  <div class="absolute inset-0 -z-10 rounded-full p-[2px] bg-[linear-gradient(135deg,rgb(var(--primary)/0.6),transparent)] blur-[0px]"></div>
          <img
            src="/TG_profile_square_2.jpg"
            alt={profile.name}
            class="h-56 w-56 rounded-full object-cover shadow-lg md:h-72 md:w-72"
            loading="eager"
          />
        </div>
      </div>
    </section>

    <!-- HIGHLIGHTS -->
    <section class="mt-14" data-reveal>
      <h2 class="section-title">
        <span class="section-icon" set:html={iconSvg.spark} />
        Highlights
      </h2>

      <div class="mt-5 grid gap-4 md:grid-cols-3">
        {highlights.map((c) => (
          <div class="panel p-5">
            <div class="flex items-start gap-3">
              <span class="section-icon">
                <span set:html={iconSvg[c.icon]} />
              </span>
              <div>
                <p class="font-semibold">{c.title}</p>
                <p class="mt-1 text-sm opacity-80">{c.desc}</p>
              </div>
            </div>
          </div>
        ))}
      </div>
    </section>

    <!-- SKILLS -->
    <section id="skills" class="mt-14 scroll-mt-24" data-reveal>
      <h2 class="section-title">
        <span class="section-icon" set:html={iconSvg.stack} />
        Skills
      </h2>

      <div class="mt-5 grid gap-4 md:grid-cols-2">
        {skillGroups.map((g) => (
          <div class="panel p-5">
            <p class="font-semibold">{g.title}</p>

            <div class="mt-3 flex flex-wrap gap-2">
              {g.items.map((s) => (
                <span class="tag" style={`--chip:${GROUP_COLOR[g.title] ?? "56 189 248"}`}>
                  {s}
                </span>
              ))}
            </div>
          </div>
        ))}
      </div>
    </section>

    <!-- EXPERIENCE -->
    <section id="experience" class="mt-14 scroll-mt-24" data-reveal>
      <h2 class="section-title">
        <span class="section-icon" set:html={iconSvg.cpu} />
        Experience
      </h2>

      <div class="mt-5 space-y-4">
        {experience.map((e) => (
          <article class="panel p-5">
            <div class="flex flex-col gap-2 md:flex-row md:items-baseline md:justify-between">
              <div>
                <p class="font-semibold">{e.role} - {e.company}</p>
                <p class="text-sm opacity-80">{e.team} - {e.location}</p>

                <div class="mt-3 flex flex-wrap gap-2">
                  {expTags(e.team).map((t) => (
                    <span class="tag" style={`--chip:${TAG_COLOR(t)}`}>
                      {t}
                    </span>
                  ))}
                </div>
              </div>

              <p class="text-sm opacity-70">{e.period}</p>
            </div>

            <ul class="mt-4 list-disc space-y-2 pl-5 text-sm opacity-90">
              {e.bullets.map((b) => <li>{b}</li>)}
            </ul>
          </article>
        ))}
      </div>
    </section>

    <!-- EDUCATION -->
    <section id="education" class="mt-14 scroll-mt-24" data-reveal>
      <h2 class="section-title">
        <span class="section-icon" set:html={iconSvg.stack} />
        Education
      </h2>

      <div class="mt-5 space-y-4">
        {education.map((ed) => (
          <div class="panel p-5">
            <p class="font-semibold">{ed.title}</p>
            <p class="text-sm opacity-80">{ed.org}{ed.note ? ` - ${ed.note}` : ""} - {ed.year}</p>
          </div>
        ))}
      </div>
    </section>

    <!-- PROJECTS -->
<!--
<section id="projects" class="mt-14 scroll-mt-24" data-reveal>
  <h2 class="section-title">
    <span class="section-icon" set:html={iconSvg.link} />
    Projects & Certifications
  </h2>

  <div class="panel mt-5 p-5">
    <p class="font-semibold">Coming soon</p>
    <p class="mt-1 text-sm opacity-80">
      Public demos, case studies, and certifications will be added here.
    </p>
  </div>
</section>
-->

    <!-- CONTACT -->
    <section id="contact" class="mt-14 scroll-mt-24" data-reveal>
      <h2 class="section-title">
        <span class="section-icon" set:html={iconSvg.mail} />
        Contact
      </h2>

      <div class="mt-5 grid gap-4 md:grid-cols-2">
        <div class="panel p-5">
          <p class="font-semibold">Email</p>
          <p class="mt-1 text-sm opacity-80">{emailText || "your.email@example.com"}</p>

          <div class="mt-4 flex flex-wrap gap-3">
            <a class="btn" href={profile.links.email}>
              <span class="icon" set:html={iconSvg.mail} />
              Email me
            </a>

            <button
              type="button"
              class="btn"
              data-copy-email
              data-email={emailText}
            >
              <span class="icon" set:html={iconSvg.link} />
              Copy
            </button>
          </div>
        </div>

        <div class="panel p-5">
          <p class="font-semibold">Social</p>
          <p class="mt-1 text-sm opacity-80">Connect with me</p>

          <div class="mt-4 flex flex-wrap gap-3">
            <a class="btn" href={profile.links.linkedin} target="_blank" rel="noreferrer">
              LinkedIn
              <span class="icon opacity-80" set:html={iconSvg.arrow} />
            </a>
            <a class="btn" href={profile.links.github} target="_blank" rel="noreferrer">
              GitHub
              <span class="icon opacity-80" set:html={iconSvg.arrow} />
            </a>
          </div>
        </div>
      </div>
    </section>

    <script is:inline>
      (() => {
        const btn = document.querySelector("[data-copy-email]");
        if (!btn) return;

        btn.addEventListener("click", async () => {
          const email = btn.getAttribute("data-email") || "";
          if (!email) return;

          try {
            await navigator.clipboard.writeText(email);
            const old = btn.textContent;
            btn.textContent = "Copied";
            setTimeout(() => (btn.textContent = old), 1200);
          } catch {
            // fallback: do nothing
          }
        });
      })();
    </script>
  </main>

  <style is:global>
    /* --- Futuristic AI background --- */
    .ai-bg {
      background:
        radial-gradient(circle at 20% 10%, rgb(var(--primary) / 0.12), transparent 40%),
        radial-gradient(circle at 80% 30%, rgb(var(--primary) / 0.10), transparent 45%),
        linear-gradient(to bottom, rgb(var(--bg)), rgb(var(--bg)));
    }
    .ai-bg::after {
      content: "";
      position: absolute;
      inset: 0;
      background-image:
        linear-gradient(to right, rgb(var(--border) / 0.25) 1px, transparent 1px),
        linear-gradient(to bottom, rgb(var(--border) / 0.25) 1px, transparent 1px);
      background-size: 48px 48px;
      mask-image: radial-gradient(circle at 50% 10%, black 0%, transparent 70%);
      pointer-events: none;
    }

    .hero-glow {
      background: radial-gradient(circle, rgb(var(--primary) / 0.18), transparent 65%);
    }
    .avatar-glow {
      background: radial-gradient(circle at top, rgb(var(--primary) / 0.18), transparent 65%);
    }

    .hero-title::after {
      content: "";
      display: block;
      height: 4px;
      width: min(260px, 60%);
      margin-top: 14px;
      border-radius: 999px;
      background: linear-gradient(90deg, rgb(var(--primary)), transparent);
      opacity: 0.75;
    }

    /* --- Reusable UI atoms --- */
.panel {
  position: relative;
  border: 1px solid rgb(var(--border));
  background: rgb(var(--surface) / 0.78);
  border-radius: 20px;
  backdrop-filter: blur(10px);
  transition: transform 160ms ease, box-shadow 160ms ease, border-color 160ms ease;
}

.panel:hover {
  transform: translateY(-2px);
  border-color: rgb(var(--primary) / 0.55);
  box-shadow:
    0 0 0 1px rgb(var(--primary) / 0.20),
    0 18px 50px rgb(0 0 0 / 0.12);
}

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      border-radius: 14px;
      border: 1px solid rgb(var(--border));
      background: rgb(var(--surface));
      padding: 10px 14px;
      font-size: 0.875rem;
      font-weight: 600;
      transition: transform 160ms ease, border-color 160ms ease, box-shadow 160ms ease, opacity 160ms ease;
    }
    .btn:hover {
      transform: translateY(-2px);
      border-color: rgb(var(--primary) / 0.6);
      box-shadow: 0 0 0 1px rgb(var(--primary) / 0.18);
    }

    .pill {
      display: inline-flex;
      align-items: center;
      border-radius: 999px;
      border: 1px solid rgb(var(--border));
      background: rgb(var(--surface));
      padding: 6px 12px;
      font-size: 12px;
      opacity: 0.95;
    }
    .pill-ghost {
      background: transparent;
      opacity: 0.85;
    }

    .section-title {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 1.1rem;
      font-weight: 700;
    }
.section-icon {
  display: inline-flex;
  height: 34px;
  width: 34px;
  align-items: center;
  justify-content: center;
  border-radius: 12px;
  border: 1px solid rgb(var(--primary) / 0.35);
  background: linear-gradient(
    135deg,
    rgb(var(--primary) / 0.22),
    rgb(var(--primary) / 0.06)
  );
  color: rgb(var(--primary));
}

    .tag {
      --chip: 56 189 248;
      display: inline-flex;
      align-items: center;
      border-radius: 999px;
      border: 1px solid rgb(var(--chip) / 0.55);
      background: rgb(var(--chip) / 0.12);
      padding: 6px 10px;
      font-size: 12px;
      line-height: 1;
      color: rgb(var(--fg));
      transition: transform 160ms ease, border-color 160ms ease, background 160ms ease;
    }
    .tag:hover {
      transform: translateY(-1px);
      border-color: rgb(var(--chip) / 0.85);
      background: rgb(var(--chip) / 0.18);
    }

    .icon svg {
      display: block;
    }

    @media (prefers-reduced-motion: reduce) {
      .panel, .btn, .tag { transition: none !important; }
      .panel:hover, .btn:hover, .tag:hover { transform: none !important; }
    }
  </style>
</Layout>
