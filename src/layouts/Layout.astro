---
import "../styles/theme.css";
import "../styles/global.css";
import ThemeInit from "../components/ThemeInit.astro";
import ThemeToggle from "../components/ThemeToggle.astro";
---

<html lang="en">
  <head>
    <!-- âœ… Critical for mobile: prevents the "everything is tiny / fits in one screen" scaling -->
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="color-scheme" content="light dark" />
    <ThemeInit />
  </head>
<body>
<header class="site-header">
  <div class="mx-auto flex max-w-6xl items-center justify-between px-4 py-3">
    <a href="/" class="font-semibold">TG</a>

    <nav class="flex items-center gap-5 text-sm">
      <a href="#skills">Skills</a>
      <a href="#experience">Experience</a>
      <a href="#education">Education</a>
      <a href="#contact">Contact</a>
      <ThemeToggle />
    </nav>
  </div>
</header>



  <main>
    <slot />
  </main>

  <script is:inline>
  const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  const revealEls = [...document.querySelectorAll('[data-reveal]')];

  // If user prefers reduced motion, just show everything immediately
  if (reduceMotion) {
    revealEls.forEach(el => el.classList.add('is-revealed'));
  } else {
    const io = new IntersectionObserver((entries) => {
      for (const entry of entries) {
        if (!entry.isIntersecting) continue;

        const el = entry.target;
        el.classList.add('is-revealed');

        // If stagger container, reveal children with delays
        const stagger = el.getAttribute('data-reveal-stagger');
        if (stagger) {
          const children = [...el.querySelectorAll('[data-reveal-item]')];
          children.forEach((c, i) => {
            c.style.setProperty('--d', `${i * 70}ms`);
            c.classList.add('is-revealed');
          });
        }

        // reveal once
        io.unobserve(el);
      }
    }, { threshold: 0.12, rootMargin: '0px 0px -10% 0px' });

    revealEls.forEach(el => io.observe(el));
  }
</script>


</body>

</html>
